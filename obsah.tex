%=========================================================================
% (c) Filip Gulán, 2016

\chapter{Úvod}
\label{chap:uvod}
V minulosti v oblasti herného priemyslu existovalo niekoľko webových platforiem, ktoré sprostredkovali rôzne služby pre vývojárov hier. Za zmienku stoja napríklad tabuľky najlepších hráčov, správa odmien, pokročilé štatistiky prístupov, vzdialené úložisko dát a iné. Tieto služby boli orientované iba na webové hry, vytvorené technológiou Flash. Keďže samotná technológia Flash pomaly upadá, tak aj tieto služby pomaly zanikajú, alebo už zanikli. Takýmto príkladom môže byť líder sveta Flashových hier menom Mochimedia. Mobilné platformy ako Android a iOS, alebo platforma Steam začali sami oficiálne podporovať tieto služby už pri svojom vzniku. S rozmachom moderných webových technológií a ich následným rozšírením na chytré mobilné zariadenia vznikla možnosť tvorby webových hier, ktoré by fungovali v každom modernom webovom prehliadači, zahrňujúc nielen prehliadače v desktopových systémoch, ale aj v mobilných a tabletových.  Príchodom týchto HTML5/Javascript hier neexistovala žiadna webová stránka ponúkajúca podobné vyššie zmienené služby pre vývojárov. 

Príchodom webového portálu Clay.io v roku 2012 sa na vývojárov Javascriptových hier dočasne usmialo šťastie. Clay.io ponúkalo rôzne služby pre herných vývojárov, bez nutnosti mať státisíce prístupov do hry, alebo mať hru špičkovej grafickej úrovni. Služby boli dostupné pre všetkých, bez rozdielu. Avšak začiatkom roka 2015 sa Clay.io začalo orientovať iným smerom a z tejto webovej služby sa stal viac portál pre hráčov ako pre vývojárov. Už viac nebolo možné integrovať API do hociktorej hry a všetky hry, ktoré chceli byť umiestnené na portáli Clay.io a využívať jeho služby boli vyberané podľa prísnych kvalitatívnych kritérií. Taktiež hry využívajúce API bolo možné hrať iba na webovej stránke Clay.io a vývojár nesmel distribuovať hru na iné webové portáli. Týmto sa Clay.io uzavrelo a zaradilo sa vedľa iných svetových distribútorov HTML5 hier, ako holandská Boostermedia a Spilgames, alebo nemecký Softgames.

Táto bakalárska práca vznikla z dôvodu neexistencie otvorenej, modernej webovej platformy pre tvorbu hier pre všetkých bez rozdielu, ktorá by svoje služby ponúkala zadarmo. Táto webová platforma je orientovaná nielen na vývojárov Javascriptových hier, ktorý prostredníctvom API majú možnosť využívať služby platformy, ale aj na hráčov týchto vytvorených hier. Hráči by mali byť schopný hrať hry na akejkoľvek platforme, či už desktopových osobných počítačoch, alebo moderných chytrých telefónoch. Z toho dôvody by mala minimálne časť webového portálu určená hráčom byť do veľkej miery responzívna.

Nasledujúca kapitola sa venuje predstaveniu technológiám, ktoré boli využité v rámci realizácie tejto práce. Po nej nasleduje kapitola, ktorá zhrňuje už existujúce konkurenčné riešenia pre iné platformy. Návrh a implementácia sú popísané v rovnako pomenovaných kapitolách. A nakoniec priebeh a následné výsledky sú z hrnuté v kapitole Testovanie.

\chapter{Použité technológie}
\label{chap:technologie}
Pri implementácií platformy bolo nutné si dobre premyslieť, čoho sa má dosiahnuť a tak špecifikovať požiadavky na technológie, ktoré sa budú využívať. Po zhrnutí požiadaviek sa zistilo, že bude potrebný programovací jazyk pre serverovú časť, programovací a značkovací jazyk pre klientskú časť, jazyk, v ktorom bude implementované API pre vývojárov, databázu a databázový jazyk a napokon jazyk, v ktorom bude implementovaná hra demonštrujúca funkcie webovej platformy.

\section{Serverová časť}
\label{sec:server}
Pod pojmom serverová časť sa myslí všetko to, čo sa vykonáva na servery. Teda v prípade tejto práce to je hlavne generovanie webovej stránky platformy a práca s dátami uloženými v databázy. Okrem týchto vecí sa používa serverová časť pri práci s API\footnote{Application programming interface}, kedy sa využíva AJAX pre dotazovanie sa na server.

Pri výbere jazyka pre serverovú časť sa ponúkalo hneď niekoľko možností. Bolo na výber medzi PHP, Python, Java, Ruby, alebo ASP . NET. Napokon bolo vybrané PHP a zavážili hlavne vlastnosti, ktoré sú spomenuté v nasledujúcej kapitole.

\subsection{PHP}
\label{sec:php}
Hypertext Preprocessor je široko používaný a univerzálny open source\footnote{otvorený kód} skriptovací jazyk, ktorý sa obzvlášť používa na vývoj webových aplikácií a je možné ho vložiť do HTML súboru. Syntax jazyka je veľmi podobná syntaxi jazyku C. Od novších verzií sa PHP stal objektovo orientovaným a je v ňom možné používať OOP\footnote{objektovo orientované programovanie} postupy. Tento jazyk beží takmer na všetkých operačných systémoch od UNIXu cez Windows až po Mac OS X.

PHP bol zvolený pre serverovú časť hlavne kvôli tomu, že to je najrozšírenejší serverový jazyk a takmer všetci poskytovatelia hostingu ponúkajú webhosting práve s PHP a teda nenastáva problém s výberom poskytovateľa. Okrem toho PHP podporuje mnohé databázy ako MySQL, Oracle a PostgreSQL. Práve kombinácia PHP s Apache serverom a MySQL databázou je jedna z najobľúbenejších. 

\subsection{Model Controler View architektúra}
\label{sec:mvc}
MVC je architektonický vzor, ktorý sa uchytil predovšetkým pri tvorbe webových aplikácií a informačných systémov. Je súčasťou populárnych webových rámcov, ako napríklad Nette, alebo Zend. Základnou myšlienkou je oddelenie logiky od výstupu. MVC pozostáva, ako už názov napovedá, z 3 typov komponentov. Z modelu, pohľadu (view) a kontroléru. Model obsahuje všetku logiku aplikácie. Môžu sa v ňom nachádzať výpočty, alebo databázové operácie. Komponent pohľad sa zase stará o zobrazovanie výstupu užívateľovi. Obsahuje minimálne množstvo logiky, ktorá je pre výpis nutná. Tretí a posledný typ je kontrolér, ktorý komunikuje s užívateľom, modelom aj pohľadom a komponenty navzájom prepája. Príklad takejto architektúry a komunikácie medzi jednotlivými komponentami je zobrazený na nasledujúcom obrázku.
\begin{figure}[h]
  \centering
  \includegraphics[scale=0.40]{fig/mvc.eps}
  \caption{Príklad MVC}
  \label{fig:mvc}
\end{figure}

\subsection{Nette}
\label{sec:nette}
PHP je síce samo o sebe mocný programovací jazyk, ale v prípade zvolenia čistého PHP, by programátor musel riešiť veľké množstvo vecí, ktoré niekto v minulosti už dávno efektívnejšie vyriešil. Okrem toho by si programátor musel dávať veľký pozor a ošetrovať početné množstvo bezpečnostných rizík. Kvôli týmto veciam bol pre účel práce vybraný aplikačný rámec Nette.

Nette je rámec napísaný v PHP5, ktorý sa zameriava na pohodlnejšie a rýchlejšie programovanie webových aplikácií a elimináciu bezpečnostných rizík. Podporuje MVC a OOP. Z veľkej časti je založený na vytváraní znovu použiteľných komponentov. K Nette patrí aj šablónovací systém Latte, ktorý zapuzdruje PHP v HTML súboroch do špeciálnych Latte makier a tým eliminuje bezpečnostné riziká. Tracy a Tester zase slúžia na hľadanie a odlaďovanie chýb. Pôvodným autorom je David Grundl, ale v súčasnosti sa o rozvoj rámcu stará Nette Foundation. Je ponúkaný pod licenciou GNU GPL a licenciou Nette (obdoba BSD licencie). Rámec sa teší veľkej obľube a taktiež početnej komunite v Čechách a na Slovensku. Minimálne požiadavky, pre správnu funkčnosť rámca, sa vyžaduje PHP verzie 5.3.1 a vyššej. Všetky požiadavky je možné overiť oficiálnym checker.php skriptom.

\section{Databázová časť}
\label{sec:databaza}
Databáza, ako prostriedok pre uloženie dát, bola zvolená hlavne kvôli vlastnosti ACID\footnote{atomickosť, konzistencia, izolovanosť a trvácnosť} a pre prístup viacerých užívateľov k databázy súčasne. Okrem iného, databázy šetria pamäťové miesto tým, že pri dobrom návrhu sa v databázy nenachádzajú redundantné dáta. Manipulácia s dátami je pomerne rýchla, pretože sa do medzi pamäte neukladá celá databáza. Nad databázou sa dajú vykonávať zložité dotazy a spájať dáta z viacerých tabuliek.  Na výber boli rôzne alternatívy ako napríklad PL/SQL, T-SQL alebo vybraný MySQL.   

\subsection{MySQL}
\label{sec:mysql}
MySQL je otvorený, viac užívateľský SQL relačný databázový server, ktorý je implementovaný vo viacerých programovacích a hlavne serverových jazykoch, napríklad v skriptovacom jazyku PHP. Je to databázový relačný systém, teda každá databáza v MySQL je tvorená z jednej alebo viacerých tabuliek, ktoré majú riadky a stĺpce. Riadky udávajú jednotlivé záznamy, stĺpce zase dátové typy jednotlivých záznamov. Práca s takouto databázou je vykonávaná pomocou takzvaných dotazov.

\section{Klientská časť}
\label{sec:klient}
Klientská časť pokrýva všetko to, čo je zobrazené užívateľovi. Teda v tomto prípade je myslená kompletná stránka, ktorej zostavovanie sa dialo z väčšej miery na servery. Aby boli informácie určené pre užívateľa zobrazené v nejakej prijateľnej a užívateľsky prívetivej podobe, tak sa vyžaduje okrem značkovacieho jazyka HTML použiť aj CSS kaskádové štýly. Keďže moderná prezentácia informácií na webových portáloch vyžaduje aj určitú ľahkosť a dynamiku, tak k tomuto účelu bol použitý celosvetovo rozšírený programovací jazyk Javascript.

\subsection{HTML}
\label{sec:html}
Hyper Text Markup Language je značkovací jazyk určený pre popis webových dokumentov, hlavne webových stránok. Najprv bol iba veľmi jednoduchá podmnožina jazyka SGML\footnote{Standard Generalized Markup Language}, ale neskôr sa z neho vyvinul samostatný štandard. HTML dokument sa popisuje pomocou HTML tagov. Každý typ HTML tagu slúži na popísanie odlišného typu obsahu dokumentu.  

V minulosti sa HTML používal na definovanie štruktúry dokumentu a aj jeho výzoru. V súčasnej dobe je HTML určené iba na zmienenú definíciu štruktúry.

\subsection{CSS}
\label{sec:css}
Kvôli tomu, že HTML sa začalo používať iba na definovanie štruktúry dokumentu a nie jeho výzoru, bol vyvinutí Cascading Style Sheets. CSS popisuje ako budú HTML tagy zobrazené na obrazovke, papieri, alebo inom médiu. CSS šetrí veľa času tým, že môže popisovať rozmiestnenie viacerých webových stránok naraz.

\subsection{Javascript}
\label{sec:javascript}
Javascript je skriptovací, prototypovo založený jazyk, ktorý sa v súčasnosti používa hlavne pri tvorbe dynamických webových prezentácií a webových stránok. Javascript beží na klientskej strane webu. Je spúšťaný väčšinou vo webových prehliadačoch. V súčasnosti Javascript podporuje väčšina webových prehliadačov a je najpoužívanejší skriptovací jazyk používaný na klientskej strane.

Bola by chyba myslieť si, že Javascript svoje uplatnenie pri tvorbe webov má iba na strane klienta. Javascript je naozaj všestranný jazyk a svoje uplatnenie nájde aj na servery napríklad v podobe Node.js. Pre účely tejto práce je avšak použitý klasický klientský Javascript spúšťaný vo webovom prehliadači.

\subsection{JQuery}
\label{sec:jquery}
JQuery je ľahká a rýchla Javascriptová knižnica, ktorej hlavným cieľom je, aby bolo použitie Javascriptu na webových stránkach omnoho jednoduchšie. Taktiež zjednodušuje komplikované veci Javascriptu, ako AJAX volania a manipuláciu s DOM. Okrem toho obsahuje metódy na manipuláciu s CSS, HTML udalosti, efekty a animácie a ďalšie nápomocné programy. Je rozšíriteľná pomocou pluginov a na väčšinu známych vecí už existuje JQuery plugin. Knižnica zároveň rieši tzv. cross-browser problémy, kedy jedna vec sa môže v rôznych prehliadačoch správať odlišne.

Je to najobľúbenejšia a najrozšírenejšia Javascriptová knižnica, čomu dáva za pravdu nielen početná komunita okolo, ale aj to, že je využívaná najväčšími firmami ako Google, či Microsoft.

\subsection{Bootstrap}
\label{sec:bootstrap}
Bootstrap je frontendový aplikačný rámec pre rýchle a ľahké vyvíjanie responzívnych webových stránok. Obsahuje predpripravené dizajnérske typografické šablóny založené na HTML a CSS. Hodí sa predovšetkým na prototypovanie, hlavne kvôli značnej neoriginalite vytvorených stránok, keďže väčšina stránok založená na tomto rámci vypadá veľmi podobne. Na druhú stranu, jednoduchými modifikáciami si môže skúsený dizajnér upraviť Bootstrap k svojmu obrazu.   

\subsection{Chart.js}
\label{sec:chartjs}
Chart.js je ľahká Javascriptová knižnica, pomocou ktorej je tvorba grafov z daných dát veľmi jednoduchá. Na zobrazovanie grafov používa HTML tag <canvas > do ktorého sa grafy vykresľujú. Na výber je z 6 najbežnejších typov grafov. Takto vytvorené grafy sú plne responzívne, takže môžu byť správne zobrazené, ako na stolných počítačoch s veľkou obrazovkou, tak aj na malých mobilných zariadeniach.

\section{API}
\label{sec:api}
API je v tomto prípade myslené, ako knižnica, pomocou ktorej vývojári hier pristupujú k funkciám webovej platformy. Knižnica je implementovaná v Javascripte a k funkciám platformy, ktoré sú implementované na servery sa pristupuje pomocou dotazovaním technológiou AJAX.

\subsection{AJAX}
\label{sec:ajax}
Asynchronous Javascript and XML je súhrnné označenie technológií, ktoré umožňujú meniť obsah webových stránok bez nutnosti znovu načítania celej stránky zo servera. Hlavná výhoda spočíva v tom, že sa prenáša značne menšie množstvo dát. AJAX nie je samostatný programovací jazyk, ani technológia sama o sebe, ako by sa mohlo zdať. Je to skôr kombinácia niekoľkých prvkov. Je založený na internetových štandardoch. Používa kombináciu HMLHttpRequest pre získanie dát zo servera a Javascript/DOM pre zobrazenie a použitie dát.
\begin{figure}[h]
  \centering
  \includegraphics[scale=0.40]{fig/ajax.eps}
  \caption{Neblokujúca komunikácia so serverom pomocou AJAXu}
  \label{fig:ajax}
\end{figure}

\subsection{CORS}
\label{sec:cors}
Klasický Javascript je limitovaný tzv. Same origin policy. Z toho dôvodu nie je možné prijímať odpovede na dotazy z domény inej, ako je doména z ktorej bola požiadavka vyslaná.

Tento známy, hore popísaný problém rieši Cross-origin resource sharing. CORS je vlastne mechanizmus, ktorý povoľuje zakázané zdroje na webovej stránke, a tak je možné prijímať odpovede na požiadavky z inej domény, ako z domény z ktorej zdroje pochádzajú. Pre použitie tohto mechanizmu musí nastať zmena pri tvorbe požiadavku na klientovi a tiež je treba povoliť CORS na servery. Prehliadač musí posielať nastavenie Origin: doména v HTTP hlavičke. Na servery zase musí byť nastavené povolenie Acces-Control-Allow-Origin: doména, alebo * pre povolenie všetkých domén.

\section{Hra}
\label{sec:hra}
Pre demonštračnú hru sa ponúkalo buďto použiť klasický Javascript, čo ale nie je príliš rozšírená forma tvorby Javascript/HTML5 hier, alebo použiť jeden z početného množstva aplikačných rámcov, ktoré sú určené špeciálne na tvorbu hier. Na výber bol Ease.js, Tree.js, Panda.js, melon.js, Kiwi.js, alebo Phaser.js a mnoho ďalších. Bol vybraný Phaser.js, pretože to je jeden z najpoužívanejších a najbežnejších Javascriptových rámcov určených pre programovanie hier, o čom svedčí hlavne početná komunita okolo tohto rámca a fakt, že aj mnohé firmy z oblasti herného biznisu, ako Boostermedia, pracujú práve s týmto rámcom. 

\subsection{Phaser}
\label{sec:phaser}
Phaser je Javascriptový aplikačný rámec určený špeciálne pre tvorbu hier, ako desktopových, tak aj mobilných. Je založený na renderovacom rámci pixi.js. Phaser je ľahko osvojiteľný, rýchly, je ponúkaný zadarmo a má otvorený kód. Podporuje canvas a zároveň aj webgl. Obsahuje veľké množstvo predpripravených funkcií. Tieto funkcie sú spracované tak, aby ich použitie bolo jednoduché. Príkladom môže byť stavaný preloader, fyzika, animácie, častice, rôzne módy prispôsobenia veľkosti obrazovky a iné.  

\chapter{Analýza existujúcich riešení}
\label{chap:analyza}
V tejto kapitole budú predstavené konkurenčné, existujúce riešenia určené pre iné platformy, ako je platforma, pre ktorú je riešenie tejto práce určené. 

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Steam}
Steam je herná platforma od spoločnosti Valve Corporation určená predovšetkým k digitálne distribúcií hier a vytvoreniu komunity hráčov daných hier. Steam klient je podporovaný na rôznych platformách. Na počiatku podporoval iba platformu Windows, neskôr svoje pôsobenie rozšíril na platformu Mac a nakoniec na Linuxové distribúcie. Pochopitelne nie všetky hry nachádzajúce sa na steam platforme sú hrateľné vo všetkých operačných systémoch. Moemntálne samotná platforma obsahuje viac ako 3500 hier a teší sa početnej komunite hráčov. 

Steam pre vývojárov hier, ktoré boli schválené komunitou steam greenlight pre možnosť distribúcie hry na platforme, ponúka svoje Steamworks API. Steamworks API dovoluje vývojárom hier integrovať rôzne funkcie ako štatistiky, odmeny, autentifikácia, tvorba zápasov, peer-to-peer networking, steam cloud úložisko, valve anticheat, hlasový chat a v neposlednej rade aj DRM.
\begin{figure}[h]
  \centering
  \includegraphics[scale=0.27]{fig/steam.png}
  \caption{Ukážka steam klienta na Windows}
  \label{fig:steam}
\end{figure}

\section{Google Play Game Services}
Po predstavení operačného systému Android vyvinul Google svoj internetový obchod Google play, ktorý ponúka nielen aplikácie a hry pre android, ale po novom aj knihy hudbu a filmy. Vývojári momentálne môžu získať prústup na publikovanie aplikácií  v tomto obchode za 20USD, pričom reálne nie sú limitovaný počtom aplikácií a ani kvalitou.  

Okrem toho, Google povoľuje vyvojárom hier integrovať do svojich hier svoje Play Game Services API. Zprvu bolo API limitované iba na Android hry, momentláne avšak podporuje aj webové. Pred samotným použitím API si vývojár musí najprv definovať hru v Google Play Developer Console a poprípade ďalšie doplnkové funkcie. API ponúka možnosťi použitia odmien, score tabuliek, multiplayeru, uloženia dát v cloude, udalosti a úlohy a iné. 
\begin{figure}[h]
  \centering
  \includegraphics[scale=0.32]{fig/google-play.png}
  \caption{Ukážka Google Play Developer Console  - zoznam existujúcich hier}
  \label{fig:google-play}
\end{figure}

\section{Apple Game Center}
Rovnako ako Google má pre Android svoj internetový obchod a aplikáciami, tak aj Apple má svoj App Store. Narozdiel od Google play, vývojár pre prístup do App Store musí platiť ročne buď 99 USD za Apple Developer Program, alebo 299 USD za Apple Developer Enterprise Program. Viac informácií je, ako aj rozdiely v týchto programoch je možné nájsť na ích officialnej stránke. 

Taktiež Apple ponúka svoje Game Center API. API je integrovateľné do iOS hier a taktiež do OS X. Game Center umožnuje integrovať score tabuľky, odmeny, pozývanie priateľov do hry a spúštanie multiplayer hier pomocou systému automatického vytvárania hier.

\section{Clay.io}
Clay.io je webový projekt zameraný na Javascriptové/HTML5 hry. Vytvoril ho v roku 2012 Austin Hallock. Z prvu bol tento projekt rovnomerne orientovaný na vývojárov hier a aj hráčov týchto hier. Platforma neobsahovala žiadne kvalitatívne obmedzenia čo sa týka uverejnovania hier a jej služby boli zadarmo. Bolo možné do hry integrovať vlastné API, ktoré zprístupňovalo score tabuľky, odmeny, cloud úložisko dát, cross promotion, reklamy tretích strán. Okrem toho na základe už vložených informácií Clay.io dokázalo generovať rôzne konfiguračné súbory pre webové obchody ako Chrome web store alebo Mozzila marketplace a iné. Začiatkom roka 2015 sa avšak situácia zmenila a Clay.io sa uzavrelo. Začalo sa orientovať na vyššiu kvalitu hier a k API už môžu pristuovať iba oprávený schválený vývojári a publikovať tieto hry s integrovaným API je možné iba na webe Clay.io a v špeciálnej Clay.io aplikácií, ktorá je určená pre Android.    

\section{Ostatné}
Pre webové hry postavené na technológií Flash existovalo a stále existuje hneď niekoľko herných portálov určených predovšetkým pre hráčov, ktoré ponúkajú taktiež vývojárom možnosť integrovať rôzne služby webového portálu do hry. Príkladom môže byť zaniknutý Mochimedia, alebo stále existujúce herné webové portále Newgrounds.com, Gamejolt.com, alebo Kongregate.com. Nevýhodou týchto portálov je to, že použitie ich API, je často limitované iba využitie na danom webovom portáli. Všetky zmienené portáli ponúkali, alebo stále ponúkajú obdobné funkcie API, ako tomu bolo v predchádzajúcich kapitolách, teda highscore tabuľky, odmeny, úložisko v cloude, ochrana hry, udalosti a niektoré dokonca reklamy, alebo chatovacie miestnosti.
\begin{figure}[h]
  \centering
  \includegraphics[scale=0.5]{fig/odmeny2.png}
  \caption{Ukážka odmien na stránke Gamejolt.com}
  \label{fig:odmeny}
\end{figure}

\chapter{Návrh riešenia}
\label{chap:navrh}
Táto kapitola popisuje návrh riešenia tejto bakalárskej práce. Najprv pojednáva o analýze požiadavkov na komponenty, ktoré sú zahrnuté v API a na celkovú štruktúru webovej platformy. Ďalej popisuje návrh databáze a je predstavený jej konceptuálny model. Ďalšia podkapitola je venovaná návrhu rozhrania webového portálu, jeho časti určenej pre hráčov, časti určenej pre vývojárov a aj časti pre administrátorov. A nakoniec je predstavený návrh jednoduchej HTML5 hry, ktorá má za úlohu demonštrovať funkcie API.  

\section{Analýza požiadavkov na komponenty}
Požiadavky na komponenty čiastočne vychádzajú z predchádzajúcej kapitoli o Analýze už existuúcich riešení. Boli vybrané komponenty z daných existujúcich riešení také, ktoré sa najviac opakovali v daných službách, a ktoré boli reálne použiteľné na webovej platforme. Okrem toho bol zostavený orientačný doplňujúci dotazník, cielený práve na vývojárov hier a špeciálne na vývojárov webových html5 hier. Dáta boli zberané na fórach, kde sa združujú vývojári takýchto hier a v skupinách sociálnych skupín, ktoré taktiež obsahujú takýchto ľudí. V dotazníku odpovedalo viac ako 100 ľudí a týto ľudia mali vybrať 3 komponenty, ktoré pokľadajú pre seba ako vývojárov za najužitečnejšiu, pritom bolo jendo z akého hladiska, či z toho hladiska toho, že komponenta má obohacovať hru napríklad o tabuľku skóre, či odmeny a tak jej pridávať na atraktivite, alebo naopak má slúžiť vývojárovi ako napríklad štatistiky prístupov, alebo kontrola domény, na ktorej sa daná hra nachádza.   Výsledky môžete vidieť na obrázku. Dáta slúžia iba pre predstavu, čo najviac vývojárom chýba, alebo naopak, ktoré komponenty z vymenúvaných pokľadajú z ích hľadiska za najdôležitejšie, najprínosnejšie.
\begin{figure}[h]
  \centering
  \includegraphics[scale=0.7]{fig/graf-dotazniku.png}
  \caption{Výsledky dotazníku}
  \label{fig:dotaznik}
\end{figure}

Na základe tohto dotazníku, ale predovšetkým na základe analýzy už existujúccih riešení bola vybraná nasledujúca množina komponent.
\begin{enumerate}
\item Tabuľky skóre
\item Odmeny
\item Kontrola domén
\item Štatistiky prístupov
\item Úložisko v cloude
\end{enumerate}
Niektoré komponenty neboli vybrané z dôvodu, že neboli pokladané vývojármi za až tak podstatné (napríklad cross-promotion), alebo sa nehodili k danému projektu (napríklad chat, ktorý by v hre na mobilných zariadeniach s nie až tak veľkými obrazovkami, mohol byť viac na obtiaž, než k úžitku). Ďalšia komponenta, s ktorou sa v tomto projekte nepočíta, aj keď v dotazníku bola táto možnosť celkom vyberaná, je integrácia reklám do hry. Takáto komponenta by bola nad rámec tejto práce a muselo by sa okolo nej riešiť niekoľko ďalších vecí, ako získanie inzerentov, správa reklamných kampaní a ďalšie z väčšej miery netechnické veci.

\section{Návrh webovej platformy}
Návrh webovej platformy bol vypracovávaný po analýze existujúcich herných platforiem, klientov a webových portáloch, ktoré sú čiastočne uvedené v kapitole 3. V prvom rade bolo treba premyslieť, k čomu všetkomu daná webová platformu by mala slúžiť, čo všetko by na nej malo byť realizovateľné, aké možnosti by ponúkala pre vývojárov hier a aké možnosti zase pre hráčov týchto hier. 

Tento návrh, toho, čo všetko môže daný užívateľ so svojoou rolou na portáli vykonávať bol spracovaný pomocou Use Case Diagramu (Diagramu prípadov užitia) ďalej iba UCD, ktorý zobrazuje chovanie systému, tak ako ho vidí užívateľ. Účelom tohto diagramu je popísať funkcionalitu systému, teda čo sa od systému očakáva. Diagram hovorí o tom, čo má systém, v tomto prípade naša webová platforma vedieť, ale nehovcorí o tom, ako sa to bude vykonávať. V UCD sa skladá z prípadov užiatia (Use Case), aktérov (Actor) a vzťahov medzi nimi. Prípad užitia je sada niekoľkých akcií, ktoré vedú k dosiahnutiu určitého cieľa. Aktér je roľa, ktorá komunikuje s jednotlivými prípadmi užitia. Zjednodušene povedané UCD je diagram, ktorý zobrazuje to, čo všetko daná užívateľská roľa môže v systéme vykonávať. Na obrázku môžete vidieť naľavo aktéra a napravo prípad užitia. 
\begin{figure}[h]
  \centering
  \includegraphics[scale=0.4]{fig/ucd.eps}
  \caption{Use Case Diagram, naľavo aktér, napravo prípad užitia}
  \label{fig:ucd}
\end{figure}

Prvou roľou, ktorou sa užívateľ stáva po príchode na webovú platfomu je roľa neprihláseného návštevníka. Prirodzene neprihlásený, často ešte nezaregistrovaný návštevník musí mať obmedzenú množinu toho, čo môže na danej stránke vykonávať. V prípade tejto bakalárskej práce môže byť neprihlásený užívateľ napríklad hráč, ktorý sa ešte nezaregistroval, alebo sa z nejakého dôvodu nechce registrovať. Na portál prišiel vyložene !zabiť! čas, highscore tabuľky ho nemotivujú k súťaženiu s ostatnými hráčmi a ani odmeny sa mu nijak zaujímavo nevidia. Keďže platforma by mala byť optimalizovaná pre prenosné zariadenia ako mobily a tablety, tak to môže byť hráč s mobilným zariadením čakajúci napríklad v ordinácií lekára, alebo čakajúci na autobusovej zastávke. Takýto hráč teda potrebuje jediné, zobraziť zoznam hier, aby si vybral hru, tkroú chce hrať, poprípade filtrovať zoznam hier podľa nejakých kategórií, ako napríklad žánru... Po vybraní hry si chce prečítať nejaké základné informácie o hre, inštrukcie ako hru ovládať a v neposlendom rade náhľady,a elbo iné grafické matertiály, pochádzajúce najlepšei priamo z danej hry. Po tom všetkom chce samozrejme daný hráč hrať samotnú hru umiestnenú na portáli. Neprihláseným návštevníkom môže byť avšak aj hráč, ktorý sa chce na daný portál prihlásiť, poprípade sa zaregistrovať a mať tak možnosť využívať všetku funkcionalitu daného portálu  určenú pre roľu prihláseného hráča. Poslendým príkladom, ktorý bude uvedený ako neprihlásený návštevník je napríklad, užívateľ, tkroý che na tomto portáli získať roľu vývojjára hry a mať tak možnosť sa podielať na tvorbe herného obsahu, alebo využívať iné funckie určené vývojárom. Diagram prípadov užitia, ktorý zhrnuje tento odsek je na obrázku.
\begin{figure}[h]
  \centering
  \includegraphics[scale=0.4]{fig/ucd-neprihlaseny.eps}
  \caption{Use Case Diagram neprihláseného užívateľa}
  \label{fig:ucdneprihlaseny}
\end{figure}

V poradí druhou roľou kterou sa užívateľ môže stať v rámci systému je roľa prihláseného hráča. Nperihlásený návštevník sa prihláseným hráčom stáva od chvíľe kedy sa prihlási k svoju účtu hráča.  Prihlásený hráč môže vykonávať na portáli všetky akcie, ktoré môže vykonávať roľa neprihláseného návšetvníka, teda zobrazovať zoznam hier a filtrovať ich, zobrazovať detaily o hre a hrať hru. K tomu ešte môže vykonávať ďalšie akcie, na ktoré je potrebné byť prihlásený. Prihlásený hráč môže hrať hry pod svojim účtom a tým pádom získavať v danej hre odmeny a umiestnovať sa v score tabuľkách najlepších hráčov a tým nepriamo súťažiť s ďalšími prihlásenými hráčmi. Okrem toho prihlásený hráč má možnosť číselne ohodnotiť hru, alebo zdielať svoje pocity z hry s ostatnými publikovaním svojho komentáru na stránke s hrou. Hráč by mal mať možnosť tiež prezerať si svoj hráčský profil a profil ostatných hráčov. Usa case diagram, ktorý popisuje akcie prihláseného hráča môžete vidieť na obrázku.
\begin{figure}[h]
  \centering
  \includegraphics[scale=0.4]{fig/ucd-prihlasenyhrac.eps}
  \caption{Use Case Diagram prihláseného hráča}
  \label{fig:ucdprihlasenyhrac}
\end{figure}

Treťou a asi aj najvýznamnejšou roľou v rámci tejto práce je roľa vývojára. Užívateľ roľu vývojára nadobudne zaregistrovaním/prihlásením sa do svojho vývojářského účtu. Vývojár má povolené vykonávať to isté, jako 2 predošlé roľe, neprihlásený návštevník a zároveň prihlásený hráč. V pomyslenej hierarchií je táto roľa zase o niečo vyššie jako spomenuté predošlé dve. Roľa vývojára je schopná vytvárať a definovať nové hry, editovať informácie o hre, či už existujúcej, alebo novo vytváranej. Vývojár ďalej musí byť schopný nahrať herné súbory, obrázky k hre, ikony a iné promočné materiály potrebné pre platformu. Musí byť schopný zatiaľ nepublikovanú hru publiukovať/poslať na schválenie a už publikovanú hru odstrániť zo zoznamu hier viditeľných pre neprihláseného návštevníka a prihláseného hráča. Ďalej táto užívateľ, ktorý pracuje pod touto roľou musí byť shcopný zobraziť štatistiky prístupov o hre, poprípade zmeniť typy zobrazovaných štatistických grafov. Jedneou z najvýznamnejších funkcií portálu, ku ktorej má táto roľa prístup je práca s API. Presnejšie sa jedná od definovanie API komponent, ktoré boli popísané v kapitole 3. Táto práca zahrňuje definovanie, vytváranie nových odmien, editovanie už existujúcich a tektiež možnosť ich odstránenia. Umožnuje prácu s tabuľkami score, ich definovanie, vytváranie, editovanie, odstránenie, ich rôzne nastavenia... Tiež umožnuje definovať cloud úložisko, editovať ho, alebo ho kompletne odstrániť. V neposlednom rade by mal byť vývojár schopný definovať na ktorej doméne je možné hru s api spustiť a na ktoréj nie, poprípade túto fuinkcionalitu vypnúť/zapnúť. 
\begin{figure}[h]
  \centering
  \includegraphics[scale=0.4]{fig/ucd-vyvojar.eps}
  \caption{Use Case Diagram vývojára}
  \label{fig:ucdvyvojar}
\end{figure}

Poslednou, avšak nie nevýznamnou roľou je roľa, ktorá sa v pomyslenom hierarchickom rebríčku právomocí nachádza úplne najvyššie je roľa administrátora webovej platformy. Bežný užívateľ nemá možnosť stať sa administrátorom žiadnou akciou z jeho strany. Užívateľa môže povýšiť na administrátora iba iný administrátor, alebo správca databáze, ktorý má prístup k tabuľkám užívateľov a ich rolí. Administrátor má všetky práva a môže vykonávať všetky akcie a riadiť všetky udalosti na platforme, ktoré mu grafické užívateľské prostredie dovoľuje vykonávať. Teda užívateľ, ktorý nadobudol roľu administrátora môže vykonávať všetko to čo neprihlásený návštevník, prihlásený hráč a zároveň aj vývojár. Okrem toho takýto užívateľ má na starosti správny chod platformy, teda by mal mať možnosť deaktivácie(ban) a znovu aktivácie užívateľských účtov, v prípade, že by konkrétny užívateľ nejak porušoval pravidlá platformy. Tento užívateľ by mal mať možnosť editácie všetkých hier a všetkých užívateľských profilov, nielen tých, ktoré mu patria. Ďalšou významnou vecou, ktorú má roľa administrátora na starosti je schvaľovanie a odmietanie vývojármi vytvorených a odsolaných hier na schválenie. 
\begin{figure}[h]
  \centering
  \includegraphics[scale=0.4]{fig/ucd-admin.eps}
  \caption{Use Case Diagram administrátora}
  \label{fig:ucdadmin}
\end{figure}

\section{Návrh databáze}
Návrh databáze vychádza v určitej miere z predchádzajúcej kapitloli o návrhu webvovej platformy, kde boli predstavené a namodelované diagramy prípadov užitia. Tieto 2 kapitoli teda spolu úzko súvisia, keďže užívateľ chce na webovej platforme vykonávať rôzne akcie a častokrát, alebo aj skoro vždy požaduje aby sa informácie niekde uchovali, poprípade aby ich od niekaľ získal. Táto kapitola bude teda do istej miery obsahuje informácie už uvedené v kapitole o návrhu webovcej platformy, iba s tým rozdielom, že informácie sú interpretované tak, aby z nich bolo možné urobiť návrh databáze a je v popise jasne vidieť aké informácie v databázy potrebujeme uchovávať.

Návrh databáze bol realizovaný pomoocu Entity relationship diagram (ERD) s Unified modeling language notáciou. ERD sa využíva v softwarovom inžinierstve pre abstraktné a konceptuálne znázornenie dát. Pri modelované takéhoto diagramu vzniká jeden z z typov konceptuálnych alebo schématických dátových modelov systému, v tomto prípade relačnej databáze a požiadavkov na ňu z hora dole. V prípade že sa jedná o návrh webovej platformy, portálu alebo iného vo svojej podstate informačného systému, ktorý je založený na databáze, tak sa konceptuálny model v neskoršej fázi mapuje na logický dátový model (napríklad relačný model) a ten je ďalej mapovaný na fyzický dátový model. Existuje niekoľko bežných notácií využívaných pre ERD pre rôzne typy návrhov ako logické, fyzické a konceptuálne. Jedny zo známych konvencí pre písanie diagramov sú Chenova notácia, Crows Foot notácia alebo už spomenutá UML notácia. 

Najhlavnejšiu úlohu v tomto projekte hrá hra, hra je teda v diagrame akási centrálna entita, bez ktorej by nemalo zmysel tento databázový návrh a vôbec celý projekt zmysel robiť. Hra obsahuje názov, popis, inštrukcie, ikonu, titulný obrázok, dovjicu kľúčov, aktuálne nahranú verziu hry na portáli, jeden henrý žáner, príznaky či je vyvíjaná, publikované, schválená, odmietnutá a či využíva funkciu uzamknutie na doménuy. Hra môže mať niekoľko snímkov obrazovky, minimálne ale 1 musí byť prítomný vždy. Daný snímok obrazovky patrí vždy jednej konkrétnej hre. Snímok obrazovky obsahuje url obrázku, kde sa nachádza v rámci serveru. Ďalej môže byť hre priradených niekoľko domén, daná doména môže prislúchať práve jednej hre. Doména obsahuje svoju url. Ďalej hra obsahuje ďalšie funkcie spojené prevažne s API ako štatistika, vlastná štatistika, úložisko, tabuľky skóre a odmeny. Štatistika prislúcha práve jednej danej hre a hra môže mať jendu štatistiku. Štatistika v sebe obsahuje infomrácie o IP adrese, čase, dátume, zemepisnej šírky, dĺžky, štátu, mesta, internetového poskitovateľa a použitý internetový prehliadač. Okrem toho ale hra môže mať definované vlastné štatistiky, týchto štatistýk môže byť hneď niekoľko a daná vlastná štatistika prislúcha práve jednej hre. Vlastná štatistika obsahuje svoje meno a hodnotu. Úložísk môže mať hra taktiež niekoľko a jendo konkrétne úložisko patrí iba jednej hre. Úložisko má v sebe uložené hodnoty, ktorých môže byť viac, jendna hodnota úložiska patrí jednomu úložisku a zároveň jednomu konkrétnemu užívateľovi. Odmeny obsahujú meno, popis, url obrázku, a body. Daná odmena patrí k jednej hre a hra odmien môže mať viacero. Užívateľ tieto odmeny má možnosť získať a môže ich získať toľko, koľko odmien existuje. Posledným z API tabuliek sú skóre tabuľky. Skóre tabuliek môže mať hra niekoľko, a jedna skóre tabuľka patrí k jednej hre. V skkóre tabuľke sa nachádzajú hodnoty, ktorých môže mať skóre tabuľka veľa, ale jedna konkrétna hodnota skóre patrí práve jednej skóre tabuľke a zároveň jednému užívateľovi. Užívateľ je ďalšia dôležitá entita, ako je už vidieť z predošlých riadkov. Užívateľ v sebe nesie informácie o svojje prezyvke, menu, priezvysku, heslu, e-mailu, biografií, obrázku, o svojej roli v rámci systému a príznak či má zákaz na stránku, alebo nie. Hra sa môže nachádzať u hocijakého počtu hráčov v ich osobných knižniciach. Užívateľ by mal mať možnosť hru ohodnotiť a komentovať, hra môže byť hodnotená a komentované od hociakého počtu prihlásených užívateľov. Užívateľ môže komentovať jendu hru niekoľko krát, avšak hodnotit ju môže iba raz a potom môže svoje hodnotenie už iba upravovoať. Danú konkrétnu hru môže vyvíjať iba jeden herný užívateľ. Hru môže mať užívateľ pridanú vo svojej knižnici, ktorá v podstate predstavuje zoznam obľúbených hier. Hru by mal mať možnosť do tejto knihovny pridávať, v prípade  že sa tam už nenachádza, alebo v prípade že sa tam nachádza ju by mal mať možnosť z nej odstrániť. Hráč môže mať vo svojej knižnici hocikoľko hier, alebo v nej nemusí mať žiadnu hru.

\section{Návrh API}
API by malo byť implementované z väčšej časti na serverovej strane, z menšej časti na strane klienta. Malo by fungovať tak, že klient inicializuje spojenie s serverom pomoocu AJAX a CORS a v XHR správe pošle nejaký identifikátor, pravdepoodbne špeciálneho vygenerovaného reťazca tzv. API kľúča. Server by mal následne odpovedať ideálne v nejakom formáte, ktorý server dokáže vygenerovať a klientská strana zase čítať. Na tanto účel bol vybraný JavaScript Object Notation, skrátene JSON, ktorý sa používa pre prenos dát. Výhodou je, že je platformne nezávislý aj napriek tomu, že používa Javascriptovú syntax. Server by teda mal odoslať odpoveď o tom, či spojenie akceptuje a preniesť ďalšie potrebné dáta. Odoslaná JSON správa by mala ideálne vyzerať tak, že by sa tam nachádzala akási položka status, ktorá by vypovedala o tom, ako skončila operácia vykonávaná na serveri, či skončila úspechom, poprípade neúspechom a akým presne.  
\begin{lstlisting}[caption=JSON]
{
    status: '0',
    data: 'some data'
}
\end{lstlisting}
Daný neúspech by bol definovaný číslom prislúchaúcim danému neúspechu. V položke dáta by zase boli klientom požiadané dáta v prípade že operácia skončila úspechom a tieto dáta by sa na klientskej srane v danej funkcií spracovali do užívateľsky prijateľnej podoby a následne by boli ďalej predané do aplikácie.
\begin{table}[h]
\centering
\begin{tabular}{|l|l|l|}
\hline
Položka status/návratový kód & Význam \\ \hline
0 & Operácia na servery skončila úspešne \\ \hline
1 & Operácia na servery skončila neúspešne \\ \hline
1\textless & Ďalšie špecifickejšie neúspešné skončenie operácie \\ \hline
\end{tabular}
\label{navratovekody}
\caption{Tabuľka návrhov návratových kódov}
\end{table}

Z vybraných komponent pre použitie v API vyplíva, že by v API mali byť implementované nasledujúce funkcie:
\begin{enumerate}
\item Inicializácia API
\item Meranie štatistík prístupov
\item Kontrolovanie domén
\item Práca s užívateľským účtom
\item Práca s tabuľkou skóre
\item Práca s odmenami
\item Práca s cloudovým úložiskom
\end{enumerate}

\section{Návrh Hry}
Pri tvorení návrhu hry bolo brané na vedomie to, že hra by mala byť jednoduchá čo sa týka použitých rogramovacích techník, keďže hra má slúžiť predovšetkým na demonštráciu webovej platformy a jej API a vývojár, ktorý by si chcel eventuálne hru rozobrať nemusel sa snažiť pochopiť príliš zložitý kód. Z toho dôvodu boli hneď vylúčené zložité herné žánre a na výber sa ponúkali skôr klasické hry (rôzne logické stolné hry, ako pexeso, puzzle...), alebo pomerne nové obľúbené a populárne mobilné casual hry (například Flappy Bird, TimberMan, alebo rôzne Match3 klony), ktoré sú v niektorých prípadoch na implementáciu ešte jendoduchšie ako spomínané klasické. Ďalším dôležitý kritériu pri návrhu demonštračnej hry bolo to, aby v hre boli implementovateľné všetky nami navrhnuté funkcie API. Posledným avšak nie až tak dôležitým kritérium bolo, aby celá grafická stránka hry bola ľahko vytvoriteľná aj pre človeka, ktorý nie je primárne grafikom, teda ideálne bez zložitých animácií a ďalších v tomto prípade zbytočných zložitostí. 

Po zhodnotení možností bolo ako demnoštračná hra zvolené pexeso. Dôvodom je to, že pexeso je pomerne ľahko implementovateľné, dajú sa do neho integrovať všetky naše API funkcie a pre tvorbu grafiky nie sú potrebné žiadne pokročilé grafické skúsenosti, nehovoriac o animácicach. Hra by sa mala zkladať z niekoľkých obrazoviek, z hlavného menu, z obrazovky, na ktorej bude zobrazená tabuľka najlepších hráč s ich skóre, obrazovka slúžiaca ako akási sieň trofejí, v ktorej budú zobrazené získané odmeny a obrazovka, na ktorej sa bude odohrávať samotná hra. Na obrazovke hry by bola zobrazená hracia plocha + nejaký základný HUD, informujúci o tom, koľko kariet kariet zostáva otočiť, koľko hráč nahral bodov, a aké je doposiaľ najväčšie nahrané skóre daného hráča. Základný grafický návrh rozloženia hernej obrazovky môžete vidieť na obrázku. 

Hráč by mal v tejto hre za úlohu nájsť všetky rovnaké dvojice hracích kariet. Ak by našiel rovnakú dvojicu, tak by získal +10 bodov, ak by otočil dvojicu rozdielnych kariet v jendom kole, tak by stratil -1 bod. Takto by mohol získavať skóre a následne po otočení všetkých rovnakých dvojích by jeho skôre bolo odoslané na server a hráč by bol presmerovaný na obrazovku s tabuľkou najlepších hráčov. Odmeny by mohli byť implementované napríklad tak že ak by hráč otočil 2 rovnaké dvojice 3 krát za sebou, tak by získla odmenu, ak 5 krát, tak by získla ďalšiu domenu, ak by prešiel celú hru na jeden poku, tak zase inú odmenu. Cloudove úložisko by zase mohlo v tejto hre slúžiť ako počítadlo koľko odohraných hier daný hráč má. 

\chapter{Implementácia}
\label{chap:implementacia}
todo

\chapter{Testovanie}
\label{chap:testovanie}
todo

\chapter{Záver}
\label{chap:zaver}
todo












%=========================================================================
